<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù… - Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠÙ†</title>
    <style>
        :root { 
            --primary: #2c3e50; 
            --free-text: #27ae60; 
            --accent: #3498db; 
            --bg: #f0f2f5; 
            --danger: #e74c3c; 
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: var(--bg); 
            padding: 20px; 
            color: #333; 
        }
        
        /* Header Section with Logo */
        .header-section {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            text-align: center;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        .logo {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        .academy-name {
            font-size: 2rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .academy-slogan {
            font-size: 1rem;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        h1 { 
            text-align: center; 
            color: var(--primary); 
            margin-bottom: 20px; 
            border-bottom: 2px solid var(--accent); 
            display: inline-block; 
            width: 100%; 
            padding-bottom: 10px; 
        }

        /* Ø³ØªØ§ÙŠÙ„ Ø§Ù„ÙÙ„Ø§ØªØ± */
        .filter-section { 
            background: white; 
            padding: 20px; 
            border-radius: 12px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); 
            margin-bottom: 30px; 
            display: flex; 
            justify-content: center; 
            align-items: flex-start; 
            gap: 20px; 
            flex-wrap: wrap; 
            border: 1px solid #ddd; 
        }
        
        .filter-group { 
            display: flex; 
            align-items: center; 
            gap: 8px; 
        }
        
        .filter-group.days-filter { 
            flex-direction: column; 
            align-items: flex-start; 
        }
        
        .days-checkboxes { 
            display: flex; 
            gap: 12px; 
            flex-wrap: wrap; 
        }
        
        .day-checkbox { 
            display: flex; 
            align-items: center; 
            gap: 5px; 
            padding: 6px 12px; 
            background: #f8f9fa; 
            border-radius: 6px; 
            cursor: pointer; 
            transition: 0.3s; 
            border: 2px solid transparent; 
            user-select: none; 
        }
        
        .day-checkbox:hover { 
            background: #e9ecef; 
        }
        
        .day-checkbox input[type="checkbox"] { 
            cursor: pointer; 
            width: 16px; 
            height: 16px; 
        }
        
        .day-checkbox:has(input[type="checkbox"]:checked) { 
            background: #d4edda; 
            border-color: #28a745; 
            font-weight: bold; 
        }
        
        .filter-section label { 
            font-weight: bold; 
            color: var(--primary); 
            font-size: 0.9rem; 
        }
        
        .filter-section select { 
            padding: 8px 12px; 
            border-radius: 6px; 
            border: 1px solid #cbd5e0; 
            background: #fff; 
            cursor: pointer; 
            font-weight: 500; 
        }
        
        .btn-filter { 
            background: var(--accent); 
            color: white; 
            border: none; 
            padding: 10px 30px; 
            border-radius: 6px; 
            cursor: pointer; 
            font-weight: bold; 
            transition: 0.3s; 
            font-size: 1rem; 
        }
        
        .btn-filter:hover { 
            background: #2980b9; 
            transform: translateY(-2px); 
        }

        /* Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
        .dashboard { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); 
            gap: 20px; 
            width: 100%; 
            max-width: 1400px; 
            margin: 0 auto; 
        }
        
        .teacher-card { 
            background: white; 
            border-radius: 15px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.08); 
            padding: 20px; 
            border-top: 5px solid var(--accent); 
            transition: 0.3s; 
        }
        
        /* Ø¥Ø·Ø§Ø± Ø£Ø­Ù…Ø± Ù„Ù„Ù…Ù…ØªÙ„Ø¦ÙŠÙ† */
        .teacher-card.fully-booked { 
            border: 3px solid var(--danger); 
            border-top: 5px solid var(--danger); 
            box-shadow: 0 0 20px rgba(231, 76, 60, 0.3); 
        }
        
        .teacher-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 15px; 
            border-bottom: 1px solid #eee; 
            padding-bottom: 10px; 
        }
        
        .teacher-name { 
            font-size: 1.1rem; 
            font-weight: bold; 
            color: var(--primary); 
        }
        
        /* Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø³Ø§Ø¹Ø§Øª */
        .stats-container { 
            display: flex; 
            gap: 15px; 
            margin-bottom: 15px; 
            justify-content: center; 
        }
        
        .stat-box { 
            flex: 1; 
            padding: 12px; 
            border-radius: 8px; 
            text-align: center; 
        }
        
        .stat-box.free { 
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%); 
            border: 1px solid #b1dfbb; 
        }
        
        .stat-box.booked { 
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%); 
            border: 1px solid #f1aeb5; 
        }
        
        .stat-label { 
            font-size: 0.75rem; 
            color: #555; 
            margin-bottom: 3px; 
        }
        
        .stat-value { 
            font-size: 1.3rem; 
            font-weight: bold; 
        }
        
        .stat-box.free .stat-value { 
            color: #155724; 
        }
        
        .stat-box.booked .stat-value { 
            color: #721c24; 
        }

        /* Ø´Ø§Ø±Ø© Ø§Ù„Ù…Ù…ØªÙ„Ø¦ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */
        .fully-booked-badge { 
            background: var(--danger); 
            color: white; 
            padding: 4px 10px; 
            border-radius: 15px; 
            font-size: 0.75rem; 
            font-weight: bold; 
            animation: pulse 2s infinite; 
        }
        
        @keyframes pulse { 
            0%, 100% { opacity: 1; } 
            50% { opacity: 0.7; } 
        }
        
        .free-table { 
            width: 100%; 
            border-collapse: collapse; 
        }
        
        .free-table td { 
            padding: 12px 8px; 
            border-bottom: 1px solid #f1f1f1; 
        }
        
        .day-badge { 
            background: #e8f4fd; 
            color: #2980b9; 
            padding: 3px 8px; 
            border-radius: 4px; 
            font-weight: bold; 
            font-size: 0.85rem; 
        }
        
        .time-text { 
            color: var(--free-text); 
            font-weight: 600; 
            font-size: 0.9rem; 
        }

        .loading { 
            text-align: center; 
            font-size: 1.2rem; 
            margin: 50px; 
            color: var(--primary); 
        }
        
        .no-results { 
            grid-column: 1/-1; 
            text-align: center; 
            padding: 60px; 
            background: white; 
            border-radius: 15px; 
            color: #a0aec0; 
            border: 2px dashed #cbd5e0; 
        }
        
        .no-free-slots { 
            color: #999; 
            font-style: italic; 
            text-align: center; 
            padding: 15px; 
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .academy-name { font-size: 1.5rem; }
            .logo { width: 60px; height: 60px; font-size: 30px; }
            .dashboard { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <!-- Header with Logo and Name -->
    <div class="header-section">
        <div class="logo-container">
            <div class="logo">ğŸ“</div>
            <div>
                <div class="academy-name">Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</div>
                <div class="academy-slogan">Ù†Ø­Ùˆ Ù…Ø³ØªÙ‚Ø¨Ù„ Ø£ÙØ¶Ù„ Ø¨Ù„ØºØ© Ø¹Ø§Ù„Ù…ÙŠØ©</div>
            </div>
        </div>
    </div>

    <h1>ğŸ—“ï¸ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ (Ø­Ø³Ø¨ Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„Ù…Ø³ØªÙˆÙ‰)</h1>

    <div class="filter-section">
        <div class="filter-group">
            <label>Ø§Ù„Ù…Ø³ØªÙˆÙ‰:</label>
            <select id="levelFilter">
                <option value="all">ÙƒÙ„ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª</option>
                <option value="1">Level 0</option>
                <option value="1">Level 1</option>
                <option value="1">Level 2</option>
                <option value="2">Level 3</option>
                <option value="2">Level 4</option>
                <option value="2">Level 5</option>
                <option value="3">Level 6</option>
                <option value="3">Level 7</option>
                <option value="3">Level 8</option>
                <option value="3">Level 9</option>
                <option value="3">ILTES</option>
            </select>
        </div>

        <div class="filter-group days-filter">
            <label>Ø§Ù„Ø£ÙŠØ§Ù…:</label>
            <div class="days-checkboxes">
                <label class="day-checkbox">
                    <input type="checkbox" value="Sat" checked> Ø§Ù„Ø³Ø¨Øª
                </label>
                <label class="day-checkbox">
                    <input type="checkbox" value="Sun" checked> Ø§Ù„Ø£Ø­Ø¯
                </label>
                <label class="day-checkbox">
                    <input type="checkbox" value="Mon" checked> Ø§Ù„Ø§Ø«Ù†ÙŠÙ†
                </label>
                <label class="day-checkbox">
                    <input type="checkbox" value="Tue" checked> Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡
                </label>
                <label class="day-checkbox">
                    <input type="checkbox" value="Wed" checked> Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡
                </label>
                <label class="day-checkbox">
                    <input type="checkbox" value="Thu" checked> Ø§Ù„Ø®Ù…ÙŠØ³
                </label>
                <label class="day-checkbox">
                    <input type="checkbox" value="Fri" checked> Ø§Ù„Ø¬Ù…Ø¹Ø©
                </label>
            </div>
        </div>

        <div class="filter-group">
            <label>Ù…Ù†:</label>
            <select id="startTime">
                <option value="10">10:00 AM</option>
                <option value="11">11:00 AM</option>
                <option value="12">12:00 PM</option>
                <option value="13">01:00 PM</option>
                <option value="14">02:00 PM</option>
                <option value="15">03:00 PM</option>
                <option value="16">04:00 PM</option>
                <option value="17">05:00 PM</option>
                <option value="18">06:00 PM</option>
                <option value="19">07:00 PM</option>
                <option value="20">08:00 PM</option>
                <option value="21">09:00 PM</option>
                <option value="22" selected>10:00 PM</option>
                <option value="23">11:00 PM</option>
            </select>
        </div>

        <div class="filter-group">
            <label>Ø¥Ù„Ù‰:</label>
            <select id="endTime">
                <option value="11">11:00 AM</option>
                <option value="12">12:00 PM</option>
                <option value="13">01:00 PM</option>
                <option value="14">02:00 PM</option>
                <option value="15">03:00 PM</option>
                <option value="16">04:00 PM</option>
                <option value="17">05:00 PM</option>
                <option value="18">06:00 PM</option>
                <option value="19">07:00 PM</option>
                <option value="20">08:00 PM</option>
                <option value="21">09:00 PM</option>
                <option value="22">10:00 PM</option>
                <option value="23">11:00 PM</option>
                <option value="24" selected>12:00 AM</option>
            </select>
        </div>

        <button class="btn-filter" onclick="applyFilters()">Ø¨Ø­Ø« Ø§Ù„Ø¢Ù† ğŸ”</button>
    </div>
    
    <div id="loading" class="loading">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠÙ†...</div>
    <div id="dashboard" class="dashboard"></div>

    <script>
        const teacherIds = ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10','T11','T12'];
        const daysAr = { 
            "Sat": "Ø§Ù„Ø³Ø¨Øª", 
            "Sun": "Ø§Ù„Ø£Ø­Ø¯", 
            "Mon": "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", 
            "Tue": "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡", 
            "Wed": "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡", 
            "Thu": "Ø§Ù„Ø®Ù…ÙŠØ³", 
            "Fri": "Ø§Ù„Ø¬Ù…Ø¹Ø©" 
        };
        
        const levelNames = {
           
            1: "Beginner",
            2: "Intermediate",
            3: "Advanced"
        };
        
        let allTeachersData = [];

        function parseTimeRange(timeStr) {
            const parts = timeStr.trim().split(':');
            let hour = parseInt(parts[0]);
            const period = timeStr.toUpperCase().includes('PM') ? 'PM' : 'AM';
            
            if (period === 'PM' && hour !== 12) {
                hour += 12;
            } else if (period === 'AM' && hour === 12) {
                hour = 0;
            }
            
            return hour;
        }

        function calculateHoursStats(data) {
            const totalWeeklyHours = (data.num_hour_per_day || 0) * (data.numDay || 0);
            let bookedHours = 0;

            for (let day in data.schedule) {
                for (let time in data.schedule[day]) {
                    const slot = data.schedule[day][time];
                    if (slot.status === "booked") {
                        bookedHours += 1;
                    }
                }
            }
            
            const freeHours = totalWeeklyHours - bookedHours;

            return { 
                freeHours: Math.max(0, freeHours),
                bookedHours, 
                totalWeeklyHours 
            };
        }

        async function loadData() {
            for (let id of teacherIds) {
                try {
                    const response = await fetch(`${id}.json`);
                    if (response.ok) {
                        const data = await response.json();
                        allTeachersData.push({ id, data });
                    }
                } catch (e) { 
                    console.error(id + " Error"); 
                }
            }
            document.getElementById('loading').style.display = 'none';
            // Ù„Ø§ Ù†Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ - Ù†Ù†ØªØ¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¶ØºØ· Ø¨Ø­Ø«
            document.getElementById('dashboard').innerHTML = `<div class="no-results">ğŸ‘‹ Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ÙˆØ§Ù„Ø£ÙŠØ§Ù… ÙˆØ§Ù„ÙˆÙ‚Øª Ø«Ù… Ø§Ø¶ØºØ· "Ø¨Ø­Ø« Ø§Ù„Ø¢Ù†" Ù„Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­Ø©.</div>`;
        }

        function applyFilters() {
            const selectedLevel = document.getElementById('levelFilter').value;
            
            const selectedDays = Array.from(document.querySelectorAll('.day-checkbox input[type="checkbox"]:checked'))
                .map(cb => cb.value);
            
            const startLimit = parseInt(document.getElementById('startTime').value);
            const endLimit = parseInt(document.getElementById('endTime').value);
            const dashboard = document.getElementById('dashboard');
            
            dashboard.innerHTML = "";

            if (startLimit >= endLimit) {
                alert("Ø®Ø·Ø£: ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù‚Ø¨Ù„ ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©!");
                return;
            }

            if (selectedDays.length === 0) {
                dashboard.innerHTML = `<div class="no-results">âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ÙŠÙˆÙ… ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„!</div>`;
                return;
            }

            allTeachersData.forEach(item => {
                const data = item.data;
                
                if (selectedLevel !== "all") {
                    const selectedLevelNum = parseInt(selectedLevel);
                    
                    if (Array.isArray(data.level)) {
                        if (!data.level.includes(selectedLevelNum)) {
                            return;
                        }
                    } else {
                        if (parseInt(data.level) !== selectedLevelNum) {
                            return;
                        }
                    }
                }

                let matchedSlots = [];

                for (let day in data.schedule) {
                    if (!selectedDays.includes(day)) continue;

                    for (let timeStr in data.schedule[day]) {
                        if (data.schedule[day][timeStr].status === "free") {
                            const slotStart = parseTimeRange(timeStr);
                            
                            let inRange = false;
                            
                            if (endLimit === 24) {
                                inRange = slotStart >= startLimit && slotStart <= 23;
                            } else {
                                inRange = slotStart >= startLimit && slotStart < endLimit;
                            }
                            
                            if (inRange) {
                                matchedSlots.push({ day: daysAr[day] || day, time: timeStr });
                            }
                        }
                    }
                }

                const stats = calculateHoursStats(data);
                const isFullyBooked = stats.freeHours === 0 || stats.freeHours < 0;

                const card = document.createElement('div');
                card.className = 'teacher-card' + (isFullyBooked ? ' fully-booked' : '');
                
                const slotsHTML = matchedSlots.length > 0 ? 
                    `<table class="free-table">
                        <tbody>
                            ${matchedSlots.map(s => `<tr><td><span class="day-badge">${s.day}</span></td><td class="time-text">${s.time}</td></tr>`).join('')}
                        </tbody>
                    </table>` 
                    : '<div class="no-free-slots">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ§Ø¹ÙŠØ¯ Ù…ØªØ§Ø­Ø© ÙÙŠ Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„Ù…Ø­Ø¯Ø¯</div>';

                card.innerHTML = `
                    <div class="teacher-header">
                        <span class="teacher-name">Ø§Ù„Ù…Ø¹Ù„Ù…Ø©/ ${data.name}</span>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            ${isFullyBooked ? '<span class="fully-booked-badge">Ù…Ù…ØªÙ„Ø¦ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</span>' : ''}
                            <span style="color:#7f8c8d; font-size:0.8rem;">${item.id}</span>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 8px; border-radius: 6px; margin-bottom: 12px; text-align: center; display: flex; justify-content: space-around; align-items: center;">
                        <span style="color: #555; font-size: 0.85rem; font-weight: bold;">
                            Ø§Ù„Ù…Ø³ØªÙˆÙ‰: ${Array.isArray(data.level) 
                                ? data.level.map(l => levelNames[l] || 'Level ' + l).join(' - ') 
                                : (data.level !== undefined ? (levelNames[data.level] || 'Level ' + data.level) : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}
                        </span>
                        <span style="color: #3498db; font-size: 0.85rem; font-weight: bold;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ø§Ø¹Ø§Øª: ${stats.totalWeeklyHours}</span>
                    </div>

                    <div class="stats-container">
                        <div class="stat-box free">
                            <div class="stat-label">Ø³Ø§Ø¹Ø§Øª ÙØ§Ø¶ÙŠØ©</div>
                            <div class="stat-value">${stats.freeHours >= 0 ? stats.freeHours : 0}</div>
                        </div>
                        <div class="stat-box booked">
                            <div class="stat-label">Ø³Ø§Ø¹Ø§Øª Ù…Ù…ØªÙ„Ø¦Ø©</div>
                            <div class="stat-value">${stats.bookedHours}</div>
                        </div>
                    </div>
                    
                    ${slotsHTML}
                `;
                dashboard.appendChild(card);
            });

            if (dashboard.innerHTML === "") {
                dashboard.innerHTML = `<div class="no-results">âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ ØªØ·Ø§Ø¨Ù‚ Ø§Ø®ØªÙŠØ§Ø±Ø§ØªÙƒ Ø­Ø§Ù„ÙŠØ§Ù‹.</div>`;
            }
        }

        window.onload = loadData;
    </script>
</body>
</html>